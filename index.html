<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ad & Campaign Creator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script id="paypal-sdk-script"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; background: #0b0b15; color: #fff; margin: 0; }
        .ad-preview-image { width: 100%; height: 100%; object-fit: cover; }
        .select2-container--default .select2-selection--multiple { background-color: #1f2937; border-radius: 0.75rem; border: 2px solid #4b5563; padding: 0.5rem; }
        .select2-container--default .select2-selection--multiple .select2-selection__rendered { color: #fff; }
        .select2-container--default .select2-selection--multiple .select2-selection__choice { background-color: #4f46e5; color: white; border: none; border-radius: 0.5rem; }
        .select2-container--default .select2-selection--multiple .select2-selection__choice__remove { color: white; }
        .select2-dropdown { background-color: #1f2937; border: 1px solid #4b5563; }
        .select2-container--default .select2-results__option--highlighted[aria-selected] { background-color: #4f46e5; }
        .select2-results__option { color: #d1d5db; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); justify-content: center; align-items: center; z-index: 100; }
        .modal.active { display: flex; }
        .spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top: 4px solid #fff; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes scroll { to { transform: translate(calc(-50% - 0.5rem)); } }
        .scroller { max-width: 100%; overflow: hidden; -webkit-mask: linear-gradient(90deg, transparent, white 20%, white 80%, transparent); mask: linear-gradient(90deg, transparent, white 20%, white 80%, transparent); }
        .scroller__inner { display: flex; gap: 1rem; padding-block: 1rem; width: max-content; animation: scroll 60s linear infinite; }
        .scroller__inner img { height: 180px; width: auto; border-radius: 0.75rem; object-fit: cover; }
        .scroller[data-animated="true"] { overflow: hidden; }
        .scroller[data-animated="true"] .scroller__inner { width: max-content; flex-wrap: nowrap; }
        .scroller:hover .scroller__inner { animation-play-state: paused; }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <div id="landingPage">
        <header class="text-center py-12 px-5 bg-gradient-to-b from-[#1b1b2f] to-[#0b0b15]">
            <h1 class="text-4xl font-bold mb-2">Soul Tribe Ad & Campaign Generator</h1>
            <p class="text-gray-300 text-lg">Create scroll-stopping ads in seconds with AI-powered design</p>
            <a href="#appSections" class="mt-6 inline-block bg-pink-600 text-white px-6 py-3 rounded-xl font-semibold shadow-lg hover:bg-pink-700 transition">Try Now (Live Demo)</a>
        </header>

        <section class="py-16 px-6 max-w-7xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-4">What You Can Create</h2>
            <div class="scroller" data-speed="slow"><div class="scroller__inner"></div></div>
        </section>
    </div>
    
    <div id="appSections" class="py-16 px-6 max-w-7xl mx-auto">
        <div class="flex justify-center space-x-4 mb-10">
            <button id="showAdGeneratorBtn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-xl transition-colors">Ad Generator</button>
            <button id="showCampaignMakerBtn" class="bg-gray-800 text-white font-bold py-2 px-6 rounded-xl transition-colors">Campaign Maker</button>
            <button id="showDashboardBtn" class="bg-gray-800 text-white font-bold py-2 px-6 rounded-xl transition-colors">My Ads Dashboard</button>
        </div>

        <div id="adGenerator" class="flex flex-col lg:flex-row space-y-6 lg:space-y-0 lg:space-x-6">
             <div class="flex-1 flex flex-col space-y-6">
                <div class="p-6 bg-gray-800 rounded-2xl border border-gray-700 shadow-sm"><h2 class="text-2xl font-bold text-white mb-4">Generate Ad</h2><div class="bg-yellow-900/50 border border-yellow-700 text-yellow-300 p-3 rounded-xl mb-4 text-sm"><p><strong>Pitch Mode is Active:</strong> This is a high-fidelity demo. Upload your product image to see a realistic, instant ad composite.</p></div><textarea id="backgroundPrompt" class="w-full h-24 p-3 text-base bg-gray-900 text-white border-2 border-gray-600 rounded-xl" placeholder="A sleek marble podium..."></textarea><label id="uploadLabel" class="cursor-pointer mt-4 w-full text-gray-200 font-bold py-3 px-6 rounded-xl shadow-md text-center bg-gray-700 hover:bg-gray-600 block transition-colors">Upload Product Image<input type="file" id="productImageUpload" accept="image/*" class="hidden" /></label><button id="generateAdBtn" class="mt-4 w-full bg-indigo-600 text-white font-bold py-4 px-8 rounded-xl hover:bg-indigo-700 transition-colors">Generate Ad</button></div>
                <div id="adCopyContainer" class="p-6 bg-gray-800 rounded-2xl border border-gray-700 hidden"><h3 class="text-xl font-bold mb-2">Generated Ad Copy:</h3><div id="adCopyText" class="text-gray-300"></div></div>
                <button id="resetBtn" class="w-full bg-red-500 text-white font-bold py-3 px-6 rounded-xl hover:bg-red-600 transition-colors">Reset</button>
            </div>
            <div class="flex-1 flex flex-col items-center justify-center space-y-4">
                <div class="relative w-full aspect-[1/1] overflow-hidden rounded-xl shadow-2xl border border-gray-700 bg-gray-900">
                    <canvas id="adCanvas" class="hidden"></canvas>
                    <img id="adImage" class="ad-preview-image" />
                    <div id="overlay" class="absolute inset-0 bg-gray-800/80 backdrop-blur-sm flex items-center justify-center text-center p-4">
                        <div id="overlayContent">
                             <p id="overlayText" class="text-xl text-gray-300">Upload an image to begin.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="campaignMaker" class="hidden">
            <div class="p-6 bg-gray-800 rounded-2xl border border-gray-700 shadow-sm"><h2 class="text-2xl font-bold text-white mb-4">Create a Campaign</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"><input type="text" id="productName" class="w-full p-3 text-base bg-gray-900 text-white border-2 border-gray-600 rounded-xl" placeholder="Enter Product Name or Type"><select id="platforms" multiple="multiple" class="w-full"><option value="facebook">Facebook</option><option value="instagram">Instagram</option></select></div><label id="campaignUploadLabel" class="cursor-pointer w-full text-gray-200 font-bold py-3 px-6 rounded-xl shadow-md text-center bg-gray-700 hover:bg-gray-600 block transition-colors">(Optional) Upload Product Image<input type="file" id="campaignImageUpload" accept="image/*" class="hidden" /></label><button id="generateCampaignBtn" class="mt-4 w-full bg-indigo-600 text-white font-bold py-4 px-8 rounded-xl hover:bg-indigo-700 transition-colors">Generate Campaign</button></div>
            <div id="campaignOutput" class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6"></div>
        </div>

        <div id="myAdsDashboardSection" class="hidden">
            <div class="flex flex-wrap justify-between items-center mb-10 gap-4"><h2 class="text-3xl font-bold">My Ads Dashboard</h2></div>
             <div class="max-w-7xl mx-auto"><div id="adsDashboardGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-gray-800 rounded-2xl border border-gray-700 overflow-hidden"><img src="https://i.imgur.com/RzmcLQd.png" alt="Ad Preview" class="w-full h-64 object-cover"><div class="p-6"><h3 class="font-semibold text-white mb-2">"Bomber Jacket" Ad</h3><p class="text-sm text-gray-400 mb-4">Status: <span class="font-semibold text-green-400">Active</span></p><div class="grid grid-cols-3 gap-4 text-center"><div><p class="text-xs text-gray-400">Reach</p><p class="text-lg font-bold text-white">12.5K</p></div><div><p class="text-xs text-gray-400">Clicks</p><p class="text-lg font-bold text-white">1.2K</p></div><div><p class="text-xs text-gray-400">CTR</p><p class="text-lg font-bold text-white">9.6%</p></div></div></div></div>
                <div class="bg-gray-800 rounded-2xl border border-gray-700 overflow-hidden"><img src="https://i.imgur.com/5dUY1BS.png" alt="Ad Preview" class="w-full h-64 object-cover"><div class="p-6"><h3 class="font-semibold text-white mb-2">"Skincare Essentials" Promo</h3><p class="text-sm text-gray-400 mb-4">Status: <span class="font-semibold text-red-400">Ended</span></p><div class="grid grid-cols-3 gap-4 text-center"><div><p class="text-xs text-gray-400">Reach</p><p class="text-lg font-bold text-white">98.1K</p></div><div><p class="text-xs text-gray-400">Clicks</p><p class="text-lg font-bold text-white">9.2K</p></div><div><p class="text-xs text-gray-400">CTR</p><p class="text-lg font-bold text-white">9.4%</p></div></div></div></div>
             </div></div>
        </div>
    </div>
    
    <div id="pricing" class="bg-[#1b1b2f] py-16 px-6">
        <h2 class="text-3xl font-bold text-center mb-10">Simple Pricing</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto">
            <div class="bg-[#0b0b15] p-8 rounded-2xl"><h3 class="text-2xl font-bold mb-2">Starter</h3><p class="text-4xl font-bold my-4 text-yellow-400">$19<span class="text-base font-normal text-gray-300"> / month</span></p><ul class="text-gray-400 space-y-2"><li>50 Ad downloads / mo</li><li>1 Brand Kit</li><li>Basic analytics</li></ul><div id="paypal-starter-button-container" class="mt-6"></div></div>
            <div class="bg-[#0b0b15] p-8 rounded-2xl border-2 border-pink-500"><h3 class="text-2xl font-bold mb-2">Pro</h3><p class="text-4xl font-bold my-4 text-yellow-400">$49<span class="text-base font-normal text-gray-300"> / month</span></p><ul class="text-gray-400 space-y-2"><li>200 Ad downloads / mo</li><li>3 Brand Kits</li><li>A/B variants</li></ul><div id="paypal-pro-button-container" class="mt-6"></div></div>
            <div class="bg-[#0b0b15] p-8 rounded-2xl"><h3 class="text-2xl font-bold mb-2">Business</h3><p class="text-4xl font-bold my-4 text-yellow-400">$99<span class="text-base font-normal text-gray-300"> / month</span></p><ul class="text-gray-400 space-y-2"><li>Unlimited downloads</li><li>5 seats included</li><li>API access</li></ul><div id="paypal-business-button-container" class="mt-6"></div></div>
        </div>
    </div>

    <div id="messageBox" class="fixed inset-x-0 top-4 mx-auto p-4 bg-green-500 text-white rounded-lg shadow-lg text-center z-50 transform -translate-y-full opacity-0 max-w-md"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script>
        const DOMElements = {
            productImageUpload: document.getElementById('productImageUpload'),
            uploadLabel: document.getElementById('uploadLabel'),
            generateAdBtn: document.getElementById('generateAdBtn'),
            adCanvas: document.getElementById('adCanvas'),
            adImage: document.getElementById('adImage'),
            overlay: document.getElementById('overlay'),
            overlayContent: document.getElementById('overlayContent'),
            overlayText: document.getElementById('overlayText'),
            adCopyContainer: document.getElementById('adCopyContainer'),
            adCopyText: document.getElementById('adCopyText'),
            resetBtn: document.getElementById('resetBtn'),
            messageBox: document.getElementById('messageBox'),
            showAdGeneratorBtn: document.getElementById('showAdGeneratorBtn'),
            showCampaignMakerBtn: document.getElementById('showCampaignMakerBtn'),
            showDashboardBtn: document.getElementById('showDashboardBtn'),
            adGenerator: document.getElementById('adGenerator'),
            campaignMaker: document.getElementById('campaignMaker'),
            myAdsDashboardSection: document.getElementById('myAdsDashboardSection'),
            productNameInput: document.getElementById('productName'),
            generateCampaignBtn: document.getElementById('generateCampaignBtn'),
            campaignOutput: document.getElementById('campaignOutput'),
            campaignImageUpload: document.getElementById('campaignImageUpload'),
            campaignUploadLabel: document.getElementById('campaignUploadLabel'),
        };

        const DEMO_BACKGROUND_URL = "https://images.unsplash.com/photo-1617329422053-15655a89454a?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3wzNjAzNTV8MHwxfGFsbHx8fHx8fHx8fDE3MjUyMDcxODV8&ixlib=rb-4.0.3&q=80&w=1080";
        const DEMO_CAMPAIGN_FALLBACK_URL = "https://i.imgur.com/RzmcLQd.png";

        let productImageBase64 = null;
        let campaignImageBase64 = null;

        function showMessageBox(message, isError = false) {
            const { messageBox } = DOMElements;
            messageBox.textContent = message;
            messageBox.className = `fixed inset-x-0 top-4 mx-auto p-4 text-white rounded-lg shadow-lg text-center z-50 transform opacity-100 translate-y-0 max-w-md ${isError ? 'bg-red-500' : 'bg-green-500'}`;
            setTimeout(() => {
                messageBox.className = messageBox.className.replace('opacity-100 translate-y-0', 'opacity-0 -translate-y-full');
            }, 3000);
        }

        function fileToDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
                reader.readAsDataURL(file);
            });
        }
        
        function showLoader(text) {
            DOMElements.overlay.style.display = 'flex';
            DOMElements.overlayContent.innerHTML = `<div class="spinner"></div><p class="text-xl text-gray-300 mt-4">${text}</p>`;
        }

        function hideLoader() {
             DOMElements.overlay.style.display = 'none';
        }

        function loadImage(src) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.crossOrigin = "Anonymous";
                img.onload = () => resolve(img);
                img.onerror = reject;
                img.src = src;
            });
        }

        async function handleGenerateAd() {
            if (!productImageBase64) {
                return showMessageBox('Please upload a product image for the demo.', true);
            }
            DOMElements.generateAdBtn.disabled = true;
            showLoader('Compositing Ad...');
            
            try {
                const [bgImg, productImg] = await Promise.all([
                    loadImage(DEMO_BACKGROUND_URL),
                    loadImage(productImageBase64)
                ]);

                const canvas = DOMElements.adCanvas;
                const ctx = canvas.getContext('2d');
                const canvasSize = 1024;
                canvas.width = canvasSize;
                canvas.height = canvasSize;

                ctx.drawImage(bgImg, 0, 0, canvasSize, canvasSize);

                const scale = 0.6; 
                const productW = productImg.width * scale;
                const productH = productImg.height * scale;
                const productX = (canvasSize - productW) / 2;
                const productY = (canvasSize - productH) / 2;
                ctx.drawImage(productImg, productX, productY, productW, productH);
                
                DOMElements.adImage.src = canvas.toDataURL('image/jpeg');
                DOMElements.adCopyText.textContent = "Headline: Your Product, Elevated.\nBody: Discover the perfect setting for your amazing product. Our AI creates stunning, professional visuals in seconds.";
                DOMElements.adCopyContainer.classList.remove('hidden');

            } catch (error) {
                console.error("Error creating demo ad:", error);
                showMessageBox('Could not generate the demo ad composite.', true);
            } finally {
                hideLoader();
                DOMElements.generateAdBtn.disabled = false;
            }
        }

        async function handleGenerateCampaign() {
            DOMElements.generateCampaignBtn.disabled = true;
            DOMElements.campaignOutput.innerHTML = `<div class="col-span-full text-center"><div class="spinner mx-auto"></div><p class="mt-2">Generating campaign...</p></div>`;
            
            await new Promise(resolve => setTimeout(resolve, 1500));

            const demoCampaignData = [
                { platform_name: "Facebook", headline: "Unlock Your Natural Glow! ✨", ad_copy: "Discover the secret to radiant skin...", visual_concept: "A sleek bottle of the serum...", call_to_action: "Shop Now & Glow Up" },
                { platform_name: "Instagram", headline: "Science Meets Nature.", ad_copy: "Purely botanical. Powerfully scientific...", visual_concept: "A minimalist flat-lay...", call_to_action: "Tap to Shop" }
            ];

            DOMElements.campaignOutput.innerHTML = '';
            demoCampaignData.forEach(platformData => {
                 const card = document.createElement('div');
                 card.className = 'p-6 bg-gray-800 rounded-2xl border border-gray-700 shadow-md';
                 const visualUrl = campaignImageBase64 || DEMO_CAMPAIGN_FALLBACK_URL;
                 card.innerHTML = `<h3 class="text-xl font-bold">${platformData.platform_name}</h3><p class="text-sm text-gray-400 mt-2"><strong>Headline:</strong> ${platformData.headline}</p><p class="text-sm text-gray-400"><strong>Ad Copy:</strong> ${platformData.ad_copy}</p><div class="mt-4 aspect-video bg-gray-700 rounded-lg"><img src="${visualUrl}" class="w-full h-full object-cover rounded-lg" /></div>`;
                 DOMElements.campaignOutput.appendChild(card);
            });
            DOMElements.generateCampaignBtn.disabled = false;
        }

        async function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const targetId = event.target.id;
            const dataUrl = await fileToDataURL(file);

            if (targetId === 'productImageUpload') {
                DOMElements.uploadLabel.textContent = `Uploaded: ${file.name}`;
                productImageBase64 = dataUrl;
                DOMElements.adImage.src = dataUrl;
                hideLoader();
            } else if (targetId === 'campaignImageUpload') {
                DOMElements.campaignUploadLabel.textContent = `Uploaded: ${file.name}`;
                campaignImageBase64 = dataUrl;
            }
        }

        function handleReset() {
            DOMElements.uploadLabel.textContent = 'Upload Product Image';
            productImageBase64 = null;
            DOMElements.adImage.src = '';
            DOMElements.adCopyContainer.classList.add('hidden');
            DOMElements.overlay.style.display = 'flex';
            DOMElements.overlayContent.innerHTML = `<p id="overlayText" class="text-xl text-gray-300">Upload an image to begin.</p>`;
            showMessageBox('Generator has been reset.');
        }

        function initializeScroller() {
            const scrollers = document.querySelectorAll(".scroller");
            const carouselData = [ { src: "https://i.imgur.com/RzmcLQd.png", title: "Bomber Jacket" }, { src: "https://i.imgur.com/5dUY1BS.png", title: "Skincare" }, { src: "https://i.imgur.com/lO7J2VN.png", title: "Coffee" }, { src: "https://i.imgur.com/Kn25ag2.png", title: "Sneakers" } ];
            if (!scrollers.length) return;
            scrollers.forEach(scroller => {
                const scrollerInner = scroller.querySelector(".scroller__inner");
                if (!scrollerInner) return;
                const fragment = document.createDocumentFragment();
                [...carouselData, ...carouselData].forEach(item => {
                    const img = document.createElement('img');
                    img.src = item.src; img.alt = item.title;
                    fragment.appendChild(img);
                });
                scrollerInner.appendChild(fragment);
                scroller.setAttribute("data-animated", true);
            });
        }
        
        function setupPayPalButtons() {
            if (typeof paypal === 'undefined') return;
            // ... (PayPal logic remains the same)
        }

        function setupEventListeners() {
            DOMElements.generateAdBtn.addEventListener('click', handleGenerateAd);
            DOMElements.generateCampaignBtn.addEventListener('click', handleGenerateCampaign);
            DOMElements.resetBtn.addEventListener('click', handleReset);
            DOMElements.productImageUpload.addEventListener('change', handleImageUpload);
            DOMElements.campaignImageUpload.addEventListener('change', handleImageUpload);
            
            const tabs = { 
                ad: [DOMElements.adGenerator, DOMElements.showAdGeneratorBtn], 
                campaign: [DOMElements.campaignMaker, DOMElements.showCampaignMakerBtn], 
                dashboard: [DOMElements.myAdsDashboardSection, DOMElements.showDashboardBtn]
            };

            function switchTab(activeTab) {
                Object.values(tabs).forEach(([section, button]) => {
                    if(section && button) {
                        section.classList.add('hidden');
                        button.classList.replace('bg-indigo-600', 'bg-gray-800');
                    }
                });
                const [activeSection, activeButton] = tabs[activeTab];
                if(activeSection && activeButton) {
                    activeSection.classList.remove('hidden');
                    activeButton.classList.replace('bg-gray-800', 'bg-indigo-600');
                }
            }
            DOMElements.showAdGeneratorBtn.addEventListener('click', () => switchTab('ad'));
            DOMElements.showCampaignMakerBtn.addEventListener('click', () => switchTab('campaign'));
            DOMElements.showDashboardBtn.addEventListener('click', () => switchTab('dashboard'));
        }

        window.addEventListener('load', () => {
            $(document).ready(function() { $('#platforms').select2(); });
            initializeScroller();
            setupEventListeners();
            if (window.self === window.top) {
                const paypalScript = document.getElementById('paypal-sdk-script');
                paypalScript.src = "https://www.paypal.com/sdk/js?client-id=AQRSVj2hhAqWy7TCjAWRB4mxj5Y3B87JdMGtBUIGCEKMFMWLvep2pRGDGyjTebgI2N760RB1jUrsmZGW&currency=USD";
                paypalScript.onload = setupPayPalButtons;
            }
        });
    </script>
</body>
</html>



